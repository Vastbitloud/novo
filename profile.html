<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Perfil - GreenFarm</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body style="min-height:100vh;background:linear-gradient(180deg,#7cb342,#558b2f);padding:2rem;display:flex;justify-content:center">
  <div style="width:100%;max-width:720px">
    <div class="card-farm" id="profile-root"></div>
    <div style="margin-top:.6rem" class="center"><a class="small-muted" href="index.html">Voltar</a></div>
  </div>

  <script src="script.js"></script>
  <script>
    function renderProfile(){
      const cur = Storage.getCurrent();
      const root = document.getElementById('profile-root');
      if(!cur){ root.innerHTML='<div class="center"><a class="btn-farm" href="login.html">Entrar</a></div>'; return; }
      root.innerHTML = `
        <h3 style="color:var(--amber-900);font-weight:700">Perfil</h3>
        <div style="margin-top:.6rem">
          <div class="small-muted">Nome</div><div style="font-weight:700">${cur.name}</div>
          <div style="height:.5rem"></div>
          <div class="small-muted">Telefone</div><div>${cur.phone}</div>
          <div style="height:.5rem"></div>
          <div class="small-muted">Saldo</div><div>R$${cur.balance.toFixed(2)}</div>
        </div>
        <div style="margin-top:.8rem;display:flex;gap:.6rem">
          <button class="btn-farm" onclick="logout(); location.href='index.html'">Logout</button>
          <button class="tool-btn" onclick="navigator.clipboard?.writeText(location.origin+'/?ref='+cur.phone).then(()=>notify('success','Link copiado'))">Copiar link</button>
        </div>
      `;
    }
    document.addEventListener('DOMContentLoaded', renderProfile);
  </script>
</body>
</html>
